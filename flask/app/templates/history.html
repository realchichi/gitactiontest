{% extends "base.html" %}

{% block content %}
<style >
    #box_add_history{
        background-color: #f2f2f2;
        border-radius: 15px;
        padding: 10px;
        margin-top:20px ;
        border: 1px solid gray;
        width: 550px;
    }
    .history_container{
/*        margin: auto;*/
/*        background-color: gray;*/
    }
    #identified_date,#data{
        display: inline;
    }
    #delete_button{
        border: none;
        margin-inline:13.5% ;
    }
    #plant_ifo{
        border: none;
        margin-right: 10px;
    }
</style>
<div class="history_container">
    <div id="box_add_history">
        <button id="plant_ifo">
             <img id ="picture"src="https://plant-id.ams3.cdn.digitaloceanspaces.com/similar_images/3/2f5/08515476ef7a2e7a3e64f48c491fbb17a2bfa.jpeg" width=100 >
        </button>
        <div id="data">
        <p id="identified_date">identified_date : 22 JUME 2024</p>
        <a id="delete_button" onclick="handleClickDelete(this)" >üóëÔ∏è</a>
        </div>
    </div>
    
</div>
<script>
    function handleClickDelete(element) {
        var value = element.getAttribute("value");
        value = value.split(",")
        let data = {"id":value[0] , "account_id":value[1]}
        if (!confirm("Delete " + "sure" + '?')) {
        return false;
      }
      // console.log(value)
        $.post("/delete/history", data, function (data_his) {
          location.reload()
        });
        
      }
    function createbox(data){
        for(let i=0;i<data.length;i++){
            var x =`<div id="box_add_history">
            <button id="plant_ifo">
            <img id ="`+data[i]["identified_img"]+`" width=100 >
            </button>
            <div id="data">
            <p id="identified_date">identified_date :`+ data[i]["identified_date"]+`</p>
            <a id="delete_button" value="`+[data[i]["id"],data[i]["account_id"]]+`" onclick="handleClickDelete(this)">üóëÔ∏è</a>
            </div>
            </div>`

            $("#history_container").prepend(x);
        }
    }
    $(document).ready(function () {
        $.getJSON("/history/data", function (data) {
            createbox(data);
      })
</script>
{% endblock %}